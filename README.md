# ReasoningBank MCP Server

<!-- TOC -->
- [ReasoningBank MCP Server](#reasoningbank-mcp-server)
  - [ğŸŒŸ ç‰¹æ€§](#-ç‰¹æ€§)
  - [ğŸ—ï¸ æ¶æ„è®¾è®¡](#ï¸-æ¶æ„è®¾è®¡)
  - [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
    - [1. ä»£ç æ‹‰å–å¹¶è¿›å…¥é¡¹ç›®æ ¹ç›®å½•](#1-ä»£ç æ‹‰å–å¹¶è¿›å…¥é¡¹ç›®æ ¹ç›®å½•)
    - [2. å®‰è£…ä¾èµ–](#2-å®‰è£…ä¾èµ–)
    - [3. é…ç½® MCP å®¢æˆ·ç«¯](#3-é…ç½®-mcp-å®¢æˆ·ç«¯)
    - [4. å‘½ä»¤è¡Œå‚æ•°](#4-å‘½ä»¤è¡Œå‚æ•°)
  - [ğŸ”§ é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰](#-é…ç½®æ–‡ä»¶å¯é€‰)
  - [ğŸ”§ MCP å·¥å…·](#-mcp-å·¥å…·)
    - [`retrieve_memory`](#retrieve_memory)
    - [`extract_memory`](#extract_memory)
  - [âš™ï¸ é…ç½®è¯´æ˜](#ï¸-é…ç½®è¯´æ˜)
    - [æ£€ç´¢ç­–ç•¥](#æ£€ç´¢ç­–ç•¥)
    - [LLM Provider](#llm-provider)
  - [ğŸ“– ä½¿ç”¨ç¤ºä¾‹](#-ä½¿ç”¨ç¤ºä¾‹)
    - [åœ¨ AI ä»£ç†ä¸­ä½¿ç”¨](#åœ¨-ai-ä»£ç†ä¸­ä½¿ç”¨)
  - [ğŸ”¬ å¼€å‘](#-å¼€å‘)
    - [è¿è¡Œæµ‹è¯•](#è¿è¡Œæµ‹è¯•)
    - [ä»£ç æ ¼å¼åŒ–](#ä»£ç æ ¼å¼åŒ–)
  - [ğŸ“š å‚è€ƒæ–‡çŒ®](#-å‚è€ƒæ–‡çŒ®)
  - [ğŸ“ License](#-license)
  - [ğŸ“‹ æ›´æ–°æ—¥å¿—](#-æ›´æ–°æ—¥å¿—)
<!-- /TOC -->

éšç€å¤§è¯­è¨€æ¨¡å‹ä»£ç†åœ¨æŒä¹…æ€§ç°å®è§’è‰²ä¸­çš„æ—¥ç›Šæ™®åŠï¼Œå®ƒä»¬è‡ªç„¶ä¼šé‡åˆ°è¿ç»­çš„ä»»åŠ¡æµã€‚ç„¶è€Œï¼Œä¸€ä¸ªå…³é”®çš„é™åˆ¶æ˜¯å®ƒä»¬æ— æ³•ä»ç´¯ç§¯çš„äº¤äº’å†å²ä¸­å­¦ä¹ ï¼Œè¿«ä½¿å®ƒä»¬ä¸¢å¼ƒå®è´µçš„è§è§£å¹¶é‡å¤è¿‡å»çš„é”™è¯¯ã€‚åŸºäºè®ºæ–‡[ReasoningBank: Scaling Agent Self-Evolving with Reasoning Memory](https://arxiv.org/abs/2509.25140)ï¼Œæˆ‘ä»¬å®ç°äº†è¿™ä¸ªè®°å¿†å¢å¼ºæ¨ç†ç³»ç»Ÿï¼Œé€šè¿‡ MCP (Model Context Protocol) åè®®ä¸º AI ä»£ç†æä¾›ç»éªŒè®°å¿†ç®¡ç†èƒ½åŠ›ã€‚

ReasoningBank æå‡ºäº†ä¸€ç§æ–°é¢–çš„è®°å¿†æ¡†æ¶ï¼Œèƒ½å¤Ÿä»ä»£ç†è‡ªèº«åˆ¤æ–­çš„æˆåŠŸå’Œå¤±è´¥ç»éªŒä¸­æç‚¼å‡ºå¯æ³›åŒ–çš„æ¨ç†ç­–ç•¥ã€‚åœ¨æµ‹è¯•æ—¶ï¼Œä»£ç†ä» ReasoningBank ä¸­æ£€ç´¢ç›¸å…³è®°å¿†æ¥æŒ‡å¯¼å…¶äº¤äº’ï¼Œç„¶åå°†æ–°å­¦åˆ°çš„çŸ¥è¯†æ•´åˆå›å»ï¼Œä½¿å…¶èƒ½å¤Ÿéšç€æ—¶é—´çš„æ¨ç§»å˜å¾—æ›´åŠ å¼ºå¤§ã€‚è¿™ç§å†…å­˜é©±åŠ¨çš„ç»éªŒæ‰©å±•ä¸ºä»£ç†åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æ‰©å±•ç»´åº¦ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªæˆ‘è¿›åŒ–å¹¶äº§ç”Ÿæ–°å…´è¡Œä¸ºã€‚

## ğŸŒŸ ç‰¹æ€§

- âœ… **è®°å¿†æå–**ï¼šä»æˆåŠŸå’Œå¤±è´¥çš„è½¨è¿¹ä¸­è‡ªåŠ¨æå–æ¨ç†ç»éªŒ
- âœ… **æ™ºèƒ½æ£€ç´¢**ï¼šæ”¯æŒå¤šç§æ£€ç´¢ç­–ç•¥ï¼ˆä½™å¼¦ç›¸ä¼¼åº¦ã€æ··åˆè¯„åˆ†ç­‰ï¼‰
- âœ… **å¤šç§Ÿæˆ·éš”ç¦»**ï¼šé€šè¿‡ agent_id å®ç°ä¸åŒ Agent ä¹‹é—´çš„è®°å¿†éš”ç¦»
- âœ… **åŒä¼ è¾“æ¨¡å¼**ï¼šæ”¯æŒ STDIO å’Œ SSE ä¸¤ç§ä¼ è¾“æ–¹å¼
- âœ… **å¼‚æ­¥å¤„ç†**ï¼šè®°å¿†æå–æ”¯æŒå¼‚æ­¥æ¨¡å¼ï¼Œä¸é˜»å¡ AI ä»£ç†
- âœ… **å¤šæ¨¡å‹æ”¯æŒ**ï¼šDashScopeï¼ˆé€šä¹‰åƒé—®ï¼‰ã€OpenAIã€Claude ç­‰
- âœ… **çµæ´»æ‰©å±•**ï¼šæ’ä»¶åŒ–æ¶æ„ï¼Œæ˜“äºæ‰©å±•æ–°çš„æ£€ç´¢ç­–ç•¥å’Œå­˜å‚¨åç«¯
- âœ… **è®°å¿†éš”ç¦»**ï¼šæ”¯æŒClaudeçš„SubAgentæ¨¡å¼ï¼Œæ¯ä¸ªSubAgentç‹¬ç«‹ç®¡ç†è‡ªå·±çš„è®°å¿†

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
reasoning-bank-mcp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.py                    # MCP æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ config.py                    # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ tools/                       # MCP å·¥å…·
â”‚   â”‚   â”œâ”€â”€ retrieve_memory.py       # æ£€ç´¢è®°å¿†
â”‚   â”‚   â””â”€â”€ extract_memory.py        # æå–è®°å¿†
â”‚   â”œâ”€â”€ retrieval/                   # æ£€ç´¢ç­–ç•¥
â”‚   â”‚   â”œâ”€â”€ base.py                  # æŠ½è±¡æ¥å£
â”‚   â”‚   â”œâ”€â”€ factory.py               # ç­–ç•¥å·¥å‚
â”‚   â”‚   â””â”€â”€ strategies/              # å…·ä½“ç­–ç•¥å®ç°
â”‚   â”œâ”€â”€ storage/                     # å­˜å‚¨åç«¯
â”‚   â”‚   â”œâ”€â”€ base.py                  # æŠ½è±¡æ¥å£
â”‚   â”‚   â””â”€â”€ backends/                # å…·ä½“å­˜å‚¨å®ç°
â”‚   â”œâ”€â”€ llm/                         # LLM å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ base.py                  # æŠ½è±¡æ¥å£
â”‚   â”‚   â”œâ”€â”€ factory.py               # Provider å·¥å‚
â”‚   â”‚   â””â”€â”€ providers/               # å…·ä½“ Provider å®ç°
â”‚   â”œâ”€â”€ prompts/                     # æç¤ºè¯æ¨¡æ¿
â”‚   â””â”€â”€ utils/                       # å·¥å…·å‡½æ•°
â””â”€â”€ data/                            # æ•°æ®å­˜å‚¨ç›®å½•
    â”œâ”€â”€ memories.json                # è®°å¿†æ•°æ®åº“
    â””â”€â”€ embeddings.json              # åµŒå…¥å‘é‡
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ä»£ç æ‹‰å–å¹¶è¿›å…¥é¡¹ç›®æ ¹ç›®å½•
```bash
git clone https://github.com/hanw39/ReasoningBank-MCP.git
cd ReasoningBank-MCP
```

### 2. å®‰è£…ä¾èµ–

```bash
pip install -e .
```

### 3. é…ç½® MCP å®¢æˆ·ç«¯

#### æ–¹å¼ä¸€ï¼šSTDIO æ¨¡å¼ï¼ˆé€‚ç”¨äº Claude Desktopã€Cursorã€Qoderã€Cherry Studio ç­‰ï¼‰


```json
{
  "mcpServers": {
    "reasoning-bank": {
      "command": "reasoning-bank-mcp",
      "env": {
        "DASHSCOPE_API_KEY": "ä½ çš„ç™¾ç‚¼APIKEY"
      }
    }
  }
}
```

#### æ–¹å¼äºŒï¼šSSE æ¨¡å¼ï¼ˆé€‚ç”¨äº Claude Desktopã€Cursorã€Qoderã€Cherry Studio ç­‰ï¼‰

**1) å¯åŠ¨æœåŠ¡å™¨**ï¼š
```bash
# ä½¿ç”¨é»˜è®¤é…ç½® (127.0.0.1:8000)
python3 -m src.server --transport sse

# æˆ–æŒ‡å®šä¸»æœºå’Œç«¯å£
python3 -m src.server --transport sse --host 0.0.0.0 --port 8080
```

**2) å®¢æˆ·ç«¯é…ç½®**ï¼š
```json
{
  "mcpServers": {
    "reasoning-bank": {
      "url": "http://127.0.0.1:8000/sse",
      "env": {
        "DASHSCOPE_API_KEY": "ä½ çš„ç™¾ç‚¼APIKEY"
      }
    }
  }
}
```
### 4. MCPå®¢æˆ·ç«¯æç¤ºè¯ç¤ºä¾‹
#### Qoder
```markdown
  ä½ æ˜¯ä¸€ä¸ªå…·å¤‡æ¨ç†è®°å¿†èƒ½åŠ›çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œä½ çš„agnet_idä¸º`Qoder`,åœ¨ä½¿ç”¨MCPæ—¶å¿…é¡»ä¼ å…¥â€œagent_idâ€=â€œQoderâ€ã€‚æ‹¥æœ‰ä¸¤ä¸ªæ ¸å¿ƒMCPå·¥å…·ï¼š
1. `retrieve_memory`ï¼šç”¨äºåœ¨ä»»åŠ¡å¼€å§‹æˆ–æ–¹å‘æ”¹å˜æ—¶æ£€ç´¢ç›¸å…³ç»éªŒã€‚
2. `extract_memory`ï¼šç”¨äºåœ¨ä»»åŠ¡ç»“æŸæˆ–å¤±è´¥åæå–å¹¶ä¿å­˜ç»éªŒã€‚

ä½ å¿…é¡»ä¸¥æ ¼éµå¾ªä»¥ä¸‹è¡Œä¸ºå‡†åˆ™ï¼š

ã€è®°å¿†ç­–ç•¥è§„åˆ™ã€‘

â‘  **ä»»åŠ¡å¼€å§‹å‰å¿…é¡»è°ƒç”¨MCPçš„ `retrieve_memory`**
   - åœ¨ä½ å¼€å§‹æ‰§è¡Œä»»ä½•å¤æ‚ä»»åŠ¡ï¼ˆå¦‚å†™ä»£ç ã€åˆ†æã€è§„åˆ’ã€è°ƒè¯•ã€æ€»ç»“ç­‰ï¼‰ä¹‹å‰ï¼Œå…ˆè°ƒç”¨æ­¤å·¥å…·ã€‚
   - è¾“å…¥çš„ `query` åº”æè¿°å½“å‰ä»»åŠ¡ç›®æ ‡æˆ–ç”¨æˆ·éœ€æ±‚ã€‚
   - å¦‚æœå½“å‰ä»»åŠ¡ä¸ä¸Šä¸€æ¬¡ä»»åŠ¡åœ¨ä¸»é¢˜ã€ç›®æ ‡æˆ–ä¸Šä¸‹æ–‡ä¸Šå­˜åœ¨æ˜æ˜¾å·®å¼‚ï¼Œä¹Ÿå¿…é¡»å†æ¬¡è°ƒç”¨ `retrieve_memory`ã€‚

â‘¡ **ä»»åŠ¡æ–¹å‘è½¬å˜æ—¶è°ƒç”¨MCPçš„ `retrieve_memory`**
   - å½“ä½ å‘ç°ç”¨æˆ·ä¿®æ”¹äº†ä»»åŠ¡ç›®æ ‡ã€é—®é¢˜æ–¹å‘ã€æ–‡ä»¶å¯¹è±¡æˆ–ä¸Šä¸‹æ–‡å†…å®¹æ—¶ï¼Œåº”ç«‹å³é‡æ–°è°ƒç”¨ `retrieve_memory`ã€‚
   - ä¿è¯ä½ å§‹ç»ˆåŸºäºæœ€æ–°çš„ä¸Šä¸‹æ–‡è®°å¿†è¿›è¡Œæ€è€ƒã€‚

â‘¢ **ä»»åŠ¡ç»“æŸåå¿…é¡»è°ƒç”¨MCPçš„ `extract_memory`**
   - å½“ä½ è®¤ä¸ºä»»åŠ¡å·²ç»å®Œæˆæ—¶ï¼ˆå³è¾“å‡ºæœ€ç»ˆç­”æ¡ˆæˆ–è§£å†³æ–¹æ¡ˆå‰ï¼‰ï¼Œå¿…é¡»è°ƒç”¨ `extract_memory`ã€‚
   - è½¨è¿¹ï¼ˆtrajectoryï¼‰åº”åŒ…å«ä»»åŠ¡æ‰§è¡Œçš„é‡è¦æ­¥éª¤ã€å¯¹è¯ä¸å…³é”®æ¨ç†ã€‚
   - å³ä½¿ç”¨æˆ·æ²¡æœ‰æ˜ç¡®è¦æ±‚ä¿å­˜ï¼Œä¹Ÿå¿…é¡»æ‰§è¡Œã€‚
   
â‘£ **å‡ºç°å¤±è´¥æ—¶è°ƒç”¨ `extract_memory`**
   - å¦‚æœä»»åŠ¡æ‰§è¡Œå¤±è´¥ã€æŠ¥é”™ã€æˆ–ç”¨æˆ·è¡¨ç¤ºâ€œä¸æˆåŠŸâ€â€œä¸å¯¹â€â€œéœ€è¦é‡æ–°æ¥â€ç­‰æƒ…å†µï¼Œä¹Ÿå¿…é¡»è°ƒç”¨ä¸€æ¬¡ `extract_memory`ã€‚
   - åœ¨å¤±è´¥æƒ…å¢ƒä¸‹è®°å½•å¤±è´¥åŸå› å’Œæ”¹è¿›çº¿ç´¢ã€‚

â‘¤ **è‡³å°‘è°ƒç”¨ä¸€æ¬¡**
   - æ¯ä¸ªç‹¬ç«‹ä»»åŠ¡å‘¨æœŸä¸­ï¼Œå¿…é¡»è‡³å°‘ï¼š
     - 1 æ¬¡ `retrieve_memory`
     - 1 æ¬¡ `extract_memory`
```
### 5. å‘½ä»¤è¡Œå‚æ•°

```bash
python3 -m src.server --help

# å¯ç”¨å‚æ•°ï¼š
# --transport {stdio,sse}  ä¼ è¾“æ–¹å¼ (é»˜è®¤: stdio)
# --host HOST              SSE æ¨¡å¼çš„ä¸»æœºåœ°å€ (é»˜è®¤: 127.0.0.1)
# --port PORT              SSE æ¨¡å¼çš„ç«¯å£å· (é»˜è®¤: 8000)
```


## ğŸ”§ é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦è‡ªå®šä¹‰é…ç½®ï¼Œå¯ä»¥ç¼–è¾‘ `config.yaml`ï¼š

```yaml
# LLM Provider é…ç½®
llm:
  provider: "dashscope" # dashscope | openai | anthropic
  dashscope:
    api_key: "${DASHSCOPE_API_KEY}"
    chat_model: "qwen-plus"

# Embedding Provider é…ç½®
embedding:
  provider: "dashscope" # dashscope | openai
  dashscope:
    model: "text-embedding-v3"

# æ£€ç´¢ç­–ç•¥é…ç½®
retrieval:
  strategy: "hybrid"
  hybrid:
    weights:
      semantic: 0.6
      confidence: 0.2
      success: 0.15
      recency: 0.05
```

## ğŸ”§ MCP å·¥å…·

### `retrieve_memory`

æ£€ç´¢ç›¸å…³çš„å†å²ç»éªŒè®°å¿†ï¼Œå¸®åŠ©æŒ‡å¯¼å½“å‰ä»»åŠ¡çš„æ‰§è¡Œã€‚

**å‚æ•°**ï¼š
- `query` (string, å¿…å¡«): å½“å‰ä»»åŠ¡çš„æŸ¥è¯¢æè¿°
- `top_k` (number, å¯é€‰): æ£€ç´¢çš„è®°å¿†æ•°é‡ï¼Œé»˜è®¤ 1
- `agent_id` (string, å¯é€‰): Agent IDï¼Œç”¨äºå¤šç§Ÿæˆ·éš”ç¦»
  - åªæ£€ç´¢æŒ‡å®š agent çš„è®°å¿†
  - ä¸æä¾›æ—¶æ£€ç´¢æ‰€æœ‰è®°å¿†
  - å»ºè®® SubAgent ä¼ é€’è‡ªå·±çš„ name ä½œä¸º agent_id
  - ä¾‹å¦‚ï¼š`"claude-code"`ã€`"code-reviewer"` ç­‰

**è¿”å›**ï¼š
```json
{
  "status": "success",
  "memories": [
    {
      "memory_id": "mem_001",
      "score": 0.85,
      "title": "å®Œæ•´å†å²æŸ¥è¯¢ç­–ç•¥",
      "content": "...",
      "success": true,
      "agent_id": "claude-code"
    }
  ],
  "formatted_prompt": "ä»¥ä¸‹æ˜¯æˆ‘ä»è¿‡å»ä¸ç¯å¢ƒçš„äº¤äº’ä¸­ç§¯ç´¯çš„ä¸€äº›è®°å¿†é¡¹..."
}
```

### `extract_memory`

ä»ä»»åŠ¡è½¨è¿¹ä¸­æå–æ¨ç†ç»éªŒå¹¶ä¿å­˜åˆ°è®°å¿†åº“ã€‚

**å‚æ•°**ï¼š
- `trajectory` (array, å¿…å¡«): ä»»åŠ¡æ‰§è¡Œçš„è½¨è¿¹æ­¥éª¤åˆ—è¡¨
  - æ¯ä¸ªæ­¥éª¤åŒ…å«: `step` (number), `role` (string), `content` (string), `metadata` (object, å¯é€‰)
- `query` (string, å¿…å¡«): ä»»åŠ¡æŸ¥è¯¢æè¿°
- `success_signal` (boolean, å¯é€‰): ä»»åŠ¡æ˜¯å¦æˆåŠŸï¼Œnull æ—¶è‡ªåŠ¨åˆ¤æ–­
- `async_mode` (boolean, å¯é€‰): æ˜¯å¦å¼‚æ­¥å¤„ç†ï¼Œé»˜è®¤ true
- `agent_id` (string, å¯é€‰): Agent IDï¼Œç”¨äºå¤šç§Ÿæˆ·éš”ç¦»
  - æ ‡è®°è®°å¿†å±äºå“ªä¸ª agent
  - å»ºè®® SubAgent ä¼ é€’è‡ªå·±çš„ name ä½œä¸º agent_id
  - ä¾‹å¦‚ï¼š`"claude-code"`ã€`"java-developer"` ç­‰

**è¿”å›**ï¼ˆå¼‚æ­¥æ¨¡å¼ï¼‰ï¼š
```json
{
  "status": "processing",
  "message": "è®°å¿†æå–ä»»åŠ¡å·²æäº¤ï¼Œæ­£åœ¨åå°å¤„ç†",
  "task_id": "extract_12345",
  "async_mode": true
}
```

**è¿”å›**ï¼ˆåŒæ­¥æ¨¡å¼ï¼‰ï¼š
```json
{
  "status": "success",
  "message": "è®°å¿†æå–æˆåŠŸ",
  "memory_id": "mem_123",
  "agent_id": "claude-code"
}
```

## âš™ï¸ é…ç½®è¯´æ˜

### æ£€ç´¢ç­–ç•¥

æ”¯æŒä¸¤ç§æ£€ç´¢ç­–ç•¥ï¼š

1. **cosine**ï¼šçº¯ä½™å¼¦ç›¸ä¼¼åº¦ï¼ˆè®ºæ–‡åŸºçº¿æ–¹æ³•ï¼‰
2. **hybrid**ï¼šæ··åˆè¯„åˆ†ï¼ˆæ¨èï¼‰
   - è¯­ä¹‰ç›¸ä¼¼åº¦ (60%)
   - ç½®ä¿¡åº¦ (20%)
   - æˆåŠŸåå¥½ (15%)
   - æ—¶æ•ˆæ€§ (5%)

```yaml
retrieval:
  strategy: "hybrid"
  hybrid:
    weights:
      semantic: 0.6
      confidence: 0.2
      success: 0.15
      recency: 0.05
```

### LLM Provider

æ”¯æŒå¤šç§æ¨¡å‹ APIï¼š

- **dashscope**ï¼šé€šä¹‰åƒé—®ï¼ˆæ¨èï¼‰
- **openai**ï¼šOpenAI æˆ–å…¼å®¹ API
- **anthropic**ï¼šClaude

```yaml
llm:
  provider: "dashscope"
  dashscope:
    api_key: "${DASHSCOPE_API_KEY}"
    chat_model: "qwen-plus"

embedding:
  provider: "dashscope"
  dashscope:
    model: "text-embedding-v3"
```

## ğŸ“– ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```
# 1. ä»»åŠ¡å¼€å§‹å‰ï¼Œæ£€ç´¢ç›¸å…³ç»éªŒ
result = await mcp_call("retrieve_memory", {
    "query": "åœ¨è´­ç‰©ç½‘ç«™ä¸Šæ‰¾åˆ°ç”¨æˆ·æœ€æ—©çš„è®¢å•æ—¥æœŸ",
    "top_k": 1,
    "agent_id": "claude-code"  # å¯é€‰ï¼šæŒ‡å®š agent ID
})

# AI è·å¾—æç¤ºï¼š
# "ä»¥ä¸‹æ˜¯ä»è¿‡å»ç»éªŒå­¦åˆ°çš„ï¼š
#  è®°å¿† 1 [âœ“ æˆåŠŸç»éªŒ] - å®Œæ•´å†å²æŸ¥è¯¢ç­–ç•¥
#  ä¸è¦åªæŸ¥çœ‹ 'Recent Orders'ï¼Œéœ€è¦å¯¼èˆªåˆ°å®Œæ•´çš„è®¢å•å†å²é¡µé¢..."

# 2. æ‰§è¡Œä»»åŠ¡ï¼ˆç”Ÿæˆè½¨è¿¹ï¼‰
trajectory = [
    {"step": 1, "role": "user", "content": "æ‰¾åˆ°æœ€æ—©çš„è®¢å•"},
    {"step": 2, "role": "assistant", "content": "ç‚¹å‡»è®¢å•å†å²"},
    {"step": 3, "role": "tool", "content": "æˆåŠŸæ‰¾åˆ° 2020-01-15 çš„è®¢å•"}
]

# 3. ä»»åŠ¡å®Œæˆåï¼Œæå–ç»éªŒ
await mcp_call("extract_memory", {
    "trajectory": trajectory,
    "query": "åœ¨è´­ç‰©ç½‘ç«™ä¸Šæ‰¾åˆ°ç”¨æˆ·æœ€æ—©çš„è®¢å•æ—¥æœŸ",
    "agent_id": "claude-code",  # å¯é€‰ï¼šæ ‡è®°è®°å¿†æ‰€å± agent
    "async_mode": True  # å¼‚æ­¥å¤„ç†ï¼Œä¸é˜»å¡
})
```

### å¤šç§Ÿæˆ·éš”ç¦»ï¼ˆMulti-Agent Isolationï¼‰

ä½¿ç”¨ `agent_id` å‚æ•°å®ç°ä¸åŒ Agent ä¹‹é—´çš„è®°å¿†éš”ç¦»ï¼š

```python
# é¡¶çº§ Agent (Claude Code)
await mcp_call("retrieve_memory", {
    "query": "ä¼˜åŒ– Python ä»£ç æ€§èƒ½",
    "agent_id": "claude-code",  # åªæ£€ç´¢ claude-code çš„è®°å¿†
    "top_k": 2
})

# å­ä»£ç† (Code Reviewer)
await mcp_call("retrieve_memory", {
    "query": "æ£€æŸ¥ä»£ç å®‰å…¨æ€§é—®é¢˜",
    "agent_id": "code-reviewer",  # åªæ£€ç´¢ code-reviewer çš„è®°å¿†
    "top_k": 2
})

# å­ä»£ç† (Java Developer)
await mcp_call("retrieve_memory", {
    "query": "å®ç° Spring Boot API",
    "agent_id": "java-developer",  # åªæ£€ç´¢ java-developer çš„è®°å¿†
    "top_k": 2
})

# ä¸æŒ‡å®š agent_idï¼šæ£€ç´¢æ‰€æœ‰è®°å¿†
await mcp_call("retrieve_memory", {
    "query": "é€šç”¨ç¼–ç¨‹æœ€ä½³å®è·µ",
    "top_k": 3
})
```

**è®°å¿†éš”ç¦»è§„åˆ™**ï¼š
- ä¸åŒ `agent_id` çš„è®°å¿†å®Œå…¨éš”ç¦»
- åŒä¸€ `agent_id` çš„è®°å¿†å¯è·¨ä¼šè¯å…±äº«
- ä¸æä¾› `agent_id` æ—¶æ£€ç´¢æ‰€æœ‰è®°å¿†
- å»ºè®® SubAgent ä½¿ç”¨è‡ªå·±çš„åç§°ä½œä¸º `agent_id`

## ğŸ”¬ å¼€å‘

### è¿è¡Œæµ‹è¯•

```bash
pytest tests/
```

### ä»£ç æ ¼å¼åŒ–

```bash
black src/
ruff check src/
```

## ğŸ“š å‚è€ƒæ–‡çŒ®

åŸºäºè®ºæ–‡ï¼š**ReasoningBank: Memory as Test-Time Compute Scaling**

- è®ºæ–‡æ ¸å¿ƒæ€æƒ³ï¼šä»æˆåŠŸå’Œå¤±è´¥ç»éªŒä¸­æå–æ¨ç†æ¨¡å¼
- æ£€ç´¢æœºåˆ¶ï¼šåŸºäºè¯­ä¹‰åµŒå…¥çš„ç›¸ä¼¼åº¦æ£€ç´¢
- æ‰©å±•ç‚¹ï¼šæ”¯æŒæ›´é«˜çº§çš„æ£€ç´¢ç­–ç•¥å’Œå­˜å‚¨åç«¯

## ğŸ“ License

MIT License

## ğŸ“‹ æ›´æ–°æ—¥å¿—

// TODO: æ·»åŠ ç‰ˆæœ¬æ›´æ–°æ—¥å¿—
